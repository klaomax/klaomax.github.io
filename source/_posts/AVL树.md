title: AVL树
tags:

  - 数据结构
categories:
  - 大二
author: miracle
date: 2020-12-15 00:30:00
---
# 什么是AVL树
AVL树又称平衡二叉搜索树，它能保证二叉树高度相对平衡，尽量降低二叉树的高度，提高搜索效率。单纯的二叉搜索树在最坏的情况下插入查找删除等操作时间复杂度会是O(N)。

# AVL树性质
1. 左子树和右子树的高度之差的绝对值不超过1  
2. 树中的每个左子树和右子树都是AVL树
3. 每个节点都有一个平衡因子(balance factor--bf),任一节点的平衡因子是-1,0,1。(每个节点的平衡因子等于右子树的高度减去左子树的高度 )

# AVL树效率
一棵AVL树有N个节点，其高度可以保持在lgN，插入/删除/查找的时间复杂度也是lgN。

# 插入

在每一次插入数值之后，树的平衡性都可能被破坏，这时可以通过一个简单的操作来矫正平衡–**旋转**。

旋转的目的就是减少高度，通过降低整棵树的高度来平衡。哪边的树高，就把那边的树向上旋转。

通过旋转可以降低高度。

- **所谓的左旋和右旋**都是以子树为原点的：如b是a的子树，那么旋转就围绕b来进行。
- 如果b是a的左子树，那么就围绕b将a向右旋转，看着就像是a直接掉下来了，掉成了b的右子树。
- 如果b是a的右子树，那么就围绕b将a向左旋转，看着就像是a直接掉下来了，掉成了b的左子树。  

插入节点时分四种情况，四种情况对应的旋转方法是不同的： 

例如对于被破坏平衡的节点 a 来说：



| 插入方式 | 描述                                                  | 旋转方式 |
| -------- | ----------------------------------------------------- | -------- |
| LL       | 在a的**左子树**根节点的**左子树**上插入节点而破坏平衡 | 右旋转   |
| RR       | 在a的**右子树**根节点的**右子树**上插入节点而破坏平衡 | 左旋转   |
| LR       | 在a的**左子树**根节点的**右子树**上插入节点而破坏平衡 | 先左再右 |
| RL       | 在a的**右子树**根节点的**左子树**上插入节点而破坏平衡 | 先右再左 |



1. LL右旋转

   ![](AVL%E6%A0%91/20190408211619425.png)
   
2. RR左旋转

   ![](AVL%E6%A0%91/RR.png)

3. LR

   ![LR](AVL%E6%A0%91/LR.png)

   （图第三个树中x，z反了，注意一下）

4. RL

   ![RL](AVL%E6%A0%91/RL.png)
   
   （图第二棵树的最左边是T1，第三棵树的x，z反了）
   
   参考链接：https://blog.csdn.net/qq_25343557/article/details/89110319

#  删除

分为4种情况：

1. **删除叶子节点**

   直接删除，然后向上调整为AVL树

2. **删除非叶子节点，该节点只有左孩子**

   **操作：该节点的值替换为左孩子节点的值，然后删除左孩子节点。**【左孩子节点为叶子结点，所以删除左孩子节点的情况为第1种情况。】【为什么左孩子节点为叶子节点，因为删除节点前，该树是AVL树，由AVL树的定义知，每个节点的左右子树的高度差的绝对值<=1,由于该节点只有左孩子，没有右孩子，如果左孩子还有子节点，那么将不满足每个节点的左右子树的高度差的绝对值<=1，所以左孩子节点为叶子结点】

3. **删除非叶子结点，该结点只有右孩子**

   **操作：该节点的值替换为右孩子节点的值，然后删除右孩子节点。**【右孩子节点为叶子结点，所以删除右孩子节点的情况为第1种情况。】【为什么右孩子节点为叶子节点？答案和第二种情况一样】

4. **删除非叶子结点，该节点既有左孩子也有右孩子**

   **操作：该节点的值替换为该节点的前驱节点（或者后继节点），然后删除前驱节点（或者后继节点）。**【前驱结点:在中序遍历中，一个节点的前驱结点，先找到该节点的左孩子节点，再找左孩子节点的最后一个右孩子节点。**向左走一步，然后向右走到头。**最后一个右孩子节点即为前驱节点】【后继节点：在中序遍历中，一个节点的后继结点，先找到该节点的右孩子节点，再找右孩子节点的最后一个左孩子节点。向右走一步，然后向左走到头。最后一个左孩子节点即为前驱节点】

   （以上情况具体图示，参考链接https://blog.csdn.net/qq_21388535/article/details/105601270?utm_medium=distribute.wap_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.wap_blog_relevant_pic&amp;depth_1-utm_source=distribute.wap_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.wap_blog_relevant_pic）